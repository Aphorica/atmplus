<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="709pt" height="545pt"
 viewBox="0.00 0.00 709.35 544.99" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 540.9941)">
<title>fsm</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-540.9941 705.3471,-540.9941 705.3471,4 -4,4"/>
<!-- ready -->
<g id="node1" class="node">
<title>ready</title>
<ellipse fill="none" stroke="#696969" cx="567.7611" cy="-435.4951" rx="29.736" ry="18"/>
<text text-anchor="middle" x="567.7611" y="-431.5951" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">ready</text>
</g>
<!-- pin -->
<g id="node2" class="node">
<title>pin</title>
<ellipse fill="none" stroke="#696969" cx="514.7611" cy="-351.9961" rx="27" ry="18"/>
<text text-anchor="middle" x="514.7611" y="-348.0961" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin</text>
</g>
<!-- ready&#45;&gt;pin -->
<g id="edge2" class="edge">
<title>ready&#45;&gt;pin</title>
<path fill="none" stroke="#0000ff" d="M557.0358,-418.5978C549.5155,-406.75 539.3304,-390.7037 530.8417,-377.3303"/>
<polygon fill="#0000ff" stroke="#0000ff" points="533.6037,-375.1505 525.2897,-368.5833 527.6937,-378.9018 533.6037,-375.1505"/>
<text text-anchor="middle" x="576.7192" y="-391.4951" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;inserted </text>
</g>
<!-- action&#45;selection -->
<g id="node3" class="node">
<title>action&#45;selection</title>
<ellipse fill="none" stroke="#696969" cx="258.7611" cy="-184.998" rx="65.4073" ry="18"/>
<text text-anchor="middle" x="258.7611" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">action&#45;selection</text>
</g>
<!-- pin&#45;&gt;action&#45;selection -->
<g id="edge3" class="edge">
<title>pin&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M489.779,-345.0494C457.3847,-335.2978 399.9989,-315.4404 357.4213,-286.4971 326.2886,-265.3337 297.0877,-233.1545 278.6543,-210.721"/>
<polygon fill="#0000ff" stroke="#0000ff" points="281.3725,-208.5161 272.3665,-202.9353 275.9266,-212.9142 281.3725,-208.5161"/>
<text text-anchor="middle" x="376.9311" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error -->
<g id="node4" class="node">
<title>pin&#45;error</title>
<ellipse fill="none" stroke="#696969" cx="444.7611" cy="-268.4971" rx="40.1798" ry="18"/>
<text text-anchor="middle" x="444.7611" y="-264.5971" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin&#45;error</text>
</g>
<!-- pin&#45;&gt;pin&#45;error -->
<g id="edge4" class="edge">
<title>pin&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M501.2644,-335.8966C491.1019,-323.7743 476.9904,-306.9416 465.4124,-293.1308"/>
<polygon fill="#dc143c" stroke="#dc143c" points="468.0439,-290.8217 458.9372,-285.4069 462.6795,-295.3188 468.0439,-290.8217"/>
<text text-anchor="middle" x="499.766" y="-307.9961" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- return&#45;card -->
<g id="node5" class="node">
<title>return&#45;card</title>
<ellipse fill="none" stroke="#696969" cx="382.7611" cy="-18" rx="48.9745" ry="18"/>
<text text-anchor="middle" x="382.7611" y="-14.1" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">return&#45;card</text>
</g>
<!-- pin&#45;&gt;return&#45;card -->
<g id="edge16" class="edge">
<title>pin&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M529.3158,-336.7481C542.7924,-320.9746 560.7611,-294.978 560.7611,-268.4971 560.7611,-268.4971 560.7611,-268.4971 560.7611,-101.499 560.7611,-73.1195 485.6617,-46.3786 433.0235,-31.1212"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="433.7279,-27.6829 423.1521,-28.3169 431.815,-34.4164 433.7279,-27.6829"/>
<text text-anchor="middle" x="584.3818" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge12" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#a0522d" d="M197.688,-178.506C143.2356,-172.0687 68.0462,-161.3933 40.7611,-148.998 10.5561,-135.2763 -9.197,-113.5033 4.9584,-83.499 13.7555,-64.8522 21.7471,-61.9723 40.7611,-54 90.3784,-33.1962 239.6482,-23.8417 323.6595,-20.1267"/>
<polygon fill="#a0522d" stroke="#a0522d" points="323.9783,-23.6164 333.8191,-19.6909 323.6782,-16.6228 323.9783,-23.6164"/>
<text text-anchor="middle" x="19.6625" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> done </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge13" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M200.7047,-176.5548C129.2744,-163.7522 22.3293,-135.2575 64.5199,-83.499 96.6376,-44.0978 241.272,-27.7107 324.0724,-21.462"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="324.3782,-24.9491 334.0977,-20.7321 323.8699,-17.9676 324.3782,-24.9491"/>
<text text-anchor="middle" x="88.3818" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- deposit&#45;transaction -->
<g id="node6" class="node">
<title>deposit&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="197.7611" cy="-101.499" rx="77.4308" ry="18"/>
<text text-anchor="middle" x="197.7611" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">deposit&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;deposit&#45;transaction -->
<g id="edge8" class="edge">
<title>action&#45;selection&#45;&gt;deposit&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M204.4946,-174.7473C177.8675,-168.5011 149.835,-159.6679 141.9584,-148.998 134.7932,-139.2919 140.5932,-130.259 150.7363,-122.7324"/>
<polygon fill="#0000ff" stroke="#0000ff" points="152.684,-125.6411 159.1965,-117.2842 148.894,-119.7558 152.684,-125.6411"/>
<text text-anchor="middle" x="161.6625" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> deposit </text>
</g>
<!-- withdrawal&#45;transaction -->
<g id="node7" class="node">
<title>withdrawal&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="382.7611" cy="-101.499" rx="89.4308" ry="18"/>
<text text-anchor="middle" x="382.7611" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">withdrawal&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;withdrawal&#45;transaction -->
<g id="edge10" class="edge">
<title>action&#45;selection&#45;&gt;withdrawal&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M277.9126,-167.7786C288.8879,-158.3091 303.1472,-146.6594 316.7465,-137.499 324.1411,-132.5181 332.2886,-127.6326 340.2611,-123.1461"/>
<polygon fill="#0000ff" stroke="#0000ff" points="342.0611,-126.1506 349.1385,-118.2664 338.6892,-120.0163 342.0611,-126.1506"/>
<text text-anchor="middle" x="339.2685" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> withdraw </text>
</g>
<!-- pin&#45;error&#45;&gt;action&#45;selection -->
<g id="edge5" class="edge">
<title>pin&#45;error&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M416.1063,-255.6333C385.8338,-242.0434 337.7202,-220.4443 302.6601,-204.7052"/>
<polygon fill="#0000ff" stroke="#0000ff" points="303.6995,-201.3353 293.1432,-200.4328 300.8327,-207.7213 303.6995,-201.3353"/>
<text text-anchor="middle" x="382.9311" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error&#45;&gt;pin&#45;error -->
<g id="edge6" class="edge">
<title>pin&#45;error&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M481.3505,-275.9966C493.32,-275.9579 502.8509,-273.458 502.8509,-268.4971 502.8509,-265.0864 498.3461,-262.839 491.641,-261.7549"/>
<polygon fill="#dc143c" stroke="#dc143c" points="491.5804,-258.241 481.3505,-260.9975 491.0666,-265.2222 491.5804,-258.241"/>
<text text-anchor="middle" x="517.8558" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- pin&#45;error&#45;&gt;return&#45;card -->
<g id="edge17" class="edge">
<title>pin&#45;error&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M455.3378,-251.0511C474.5793,-216.8568 510.6806,-139.4827 480.7611,-83.499 469.2181,-61.9002 447.0514,-46.1817 426.7161,-35.5656"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="428.0632,-32.3275 417.5464,-31.0442 424.9675,-38.6058 428.0632,-32.3275"/>
<text text-anchor="middle" x="516.3818" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- return&#45;card&#45;&gt;ready -->
<g id="edge7" class="edge">
<title>return&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M429.4601,-23.7076C502.563,-33.9621 635.7611,-58.5407 635.7611,-101.499 635.7611,-351.9961 635.7611,-351.9961 635.7611,-351.9961 635.7611,-378.2601 615.2833,-400.8438 596.8027,-415.8772"/>
<polygon fill="#0000ff" stroke="#0000ff" points="594.3247,-413.3676 588.5329,-422.2392 598.593,-418.9158 594.3247,-413.3676"/>
<text text-anchor="middle" x="668.5541" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;returned </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge9" class="edge">
<title>deposit&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M195.9926,-119.8357C195.9497,-129.1912 197.2944,-140.3827 202.5893,-148.998 206.0121,-154.5674 210.6559,-159.4309 215.8158,-163.6289"/>
<polygon fill="#0000ff" stroke="#0000ff" points="214.0837,-166.694 224.2479,-169.684 218.1668,-161.0081 214.0837,-166.694"/>
<text text-anchor="middle" x="248.3471" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge14" class="edge">
<title>deposit&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M233.431,-85.3996C264.6806,-71.2952 310.0585,-50.8141 342.5802,-36.1355"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="344.1346,-39.274 351.8093,-31.97 341.2548,-32.8938 344.1346,-39.274"/>
<text text-anchor="middle" x="325.3818" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge11" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M378.4733,-119.8441C375.3269,-129.6657 370.1092,-141.2927 361.7611,-148.998 350.8473,-159.0716 336.9568,-166.3516 322.9369,-171.6042"/>
<polygon fill="#0000ff" stroke="#0000ff" points="321.57,-168.3728 313.2452,-174.9262 323.8398,-174.9946 321.57,-168.3728"/>
<text text-anchor="middle" x="416.3471" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge15" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M382.7611,-83.381C382.7611,-72.5485 382.7611,-58.5513 382.7611,-46.2889"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="386.2612,-46.0827 382.7611,-36.0827 379.2612,-46.0827 386.2612,-46.0827"/>
<text text-anchor="middle" x="406.3818" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- none -->
<g id="node8" class="node">
<title>none</title>
<ellipse fill="none" stroke="#696969" cx="567.7611" cy="-518.9941" rx="27.8051" ry="18"/>
<text text-anchor="middle" x="567.7611" y="-515.0941" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">none</text>
</g>
<!-- none&#45;&gt;ready -->
<g id="edge1" class="edge">
<title>none&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M567.7611,-500.8761C567.7611,-490.0437 567.7611,-476.0464 567.7611,-463.7841"/>
<polygon fill="#0000ff" stroke="#0000ff" points="571.2612,-463.5778 567.7611,-453.5778 564.2612,-463.5778 571.2612,-463.5778"/>
<text text-anchor="middle" x="576.9311" y="-474.9941" font-family="Arial" font-size="10.00" fill="#696969"> init </text>
</g>
</g>
</svg>
