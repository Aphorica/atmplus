<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="682pt" height="545pt"
 viewBox="0.00 0.00 682.34 544.99" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 540.9941)">
<title>fsm</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-540.9941 678.3441,-540.9941 678.3441,4 -4,4"/>
<!-- ready -->
<g id="node1" class="node">
<title>ready</title>
<ellipse fill="none" stroke="#696969" cx="542.7582" cy="-435.4951" rx="29.736" ry="18"/>
<text text-anchor="middle" x="542.7582" y="-431.5951" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">ready</text>
</g>
<!-- pin -->
<g id="node2" class="node">
<title>pin</title>
<ellipse fill="none" stroke="#696969" cx="490.7582" cy="-351.9961" rx="27" ry="18"/>
<text text-anchor="middle" x="490.7582" y="-348.0961" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin</text>
</g>
<!-- ready&#45;&gt;pin -->
<g id="edge2" class="edge">
<title>ready&#45;&gt;pin</title>
<path fill="none" stroke="#0000ff" d="M532.2352,-418.5978C524.905,-406.8274 514.9943,-390.9133 506.6989,-377.5929"/>
<polygon fill="#0000ff" stroke="#0000ff" points="509.5228,-375.5065 501.2655,-368.8682 503.5809,-379.207 509.5228,-375.5065"/>
<text text-anchor="middle" x="552.7162" y="-391.4951" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;inserted </text>
</g>
<!-- action&#45;selection -->
<g id="node3" class="node">
<title>action&#45;selection</title>
<ellipse fill="none" stroke="#696969" cx="249.7582" cy="-184.998" rx="65.4073" ry="18"/>
<text text-anchor="middle" x="249.7582" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">action&#45;selection</text>
</g>
<!-- pin&#45;&gt;action&#45;selection -->
<g id="edge3" class="edge">
<title>pin&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M465.7153,-344.8957C434.2059,-335.1608 379.3858,-315.5067 339.4183,-286.4971 310.5255,-265.5257 284.3639,-233.7234 267.8584,-211.3167"/>
<polygon fill="#0000ff" stroke="#0000ff" points="270.5019,-208.9988 261.8121,-202.9377 264.8255,-213.0949 270.5019,-208.9988"/>
<text text-anchor="middle" x="358.9281" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error -->
<g id="node4" class="node">
<title>pin&#45;error</title>
<ellipse fill="none" stroke="#696969" cx="426.7582" cy="-268.4971" rx="40.1798" ry="18"/>
<text text-anchor="middle" x="426.7582" y="-264.5971" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin&#45;error</text>
</g>
<!-- pin&#45;&gt;pin&#45;error -->
<g id="edge4" class="edge">
<title>pin&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M478.4183,-335.8966C469.2739,-323.9661 456.6323,-307.473 446.1435,-293.7885"/>
<polygon fill="#dc143c" stroke="#dc143c" points="448.8027,-291.5045 439.9414,-285.6969 443.2469,-295.7629 448.8027,-291.5045"/>
<text text-anchor="middle" x="477.7631" y="-307.9961" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- return&#45;card -->
<g id="node5" class="node">
<title>return&#45;card</title>
<ellipse fill="none" stroke="#696969" cx="373.7582" cy="-18" rx="48.9745" ry="18"/>
<text text-anchor="middle" x="373.7582" y="-14.1" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">return&#45;card</text>
</g>
<!-- pin&#45;&gt;return&#45;card -->
<g id="edge16" class="edge">
<title>pin&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M506.9263,-337.3932C522.191,-321.9293 542.7582,-295.992 542.7582,-268.4971 542.7582,-268.4971 542.7582,-268.4971 542.7582,-101.499 542.7582,-74.5 472.5521,-47.6172 422.64,-31.9167"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="423.5424,-28.5324 412.9549,-28.929 421.4788,-35.2214 423.5424,-28.5324"/>
<text text-anchor="middle" x="561.933" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge12" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#a0522d" d="M189.187,-178.0662C137.1558,-171.4754 66.5713,-160.8324 40.7582,-148.998 10.6007,-135.172 -9.1999,-113.5033 4.9554,-83.499 13.7526,-64.8522 21.7554,-61.9991 40.7582,-54 88.7496,-33.7985 232.5645,-24.2434 314.6451,-20.3254"/>
<polygon fill="#a0522d" stroke="#a0522d" points="314.9986,-23.8129 324.8257,-19.8533 314.6742,-16.8204 314.9986,-23.8129"/>
<text text-anchor="middle" x="19.6595" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> done </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge13" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M193.1061,-175.8094C124.863,-162.3274 24.0999,-133.236 64.4086,-83.499 95.3596,-45.3085 234.4015,-28.4967 315.1523,-21.8422"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="315.4901,-25.3265 325.1805,-21.0433 314.934,-18.3486 315.4901,-25.3265"/>
<text text-anchor="middle" x="83.933" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- deposit&#45;transaction -->
<g id="node6" class="node">
<title>deposit&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="188.7582" cy="-101.499" rx="77.4308" ry="18"/>
<text text-anchor="middle" x="188.7582" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">deposit&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;deposit&#45;transaction -->
<g id="edge8" class="edge">
<title>action&#45;selection&#45;&gt;deposit&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M195.4916,-174.7473C168.8646,-168.5011 140.832,-159.6679 132.9554,-148.998 125.7903,-139.2919 131.5902,-130.259 141.7333,-122.7324"/>
<polygon fill="#0000ff" stroke="#0000ff" points="143.681,-125.6411 150.1936,-117.2842 139.891,-119.7558 143.681,-125.6411"/>
<text text-anchor="middle" x="152.6595" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> deposit </text>
</g>
<!-- withdrawal&#45;transaction -->
<g id="node7" class="node">
<title>withdrawal&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="373.7582" cy="-101.499" rx="89.4308" ry="18"/>
<text text-anchor="middle" x="373.7582" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">withdrawal&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;withdrawal&#45;transaction -->
<g id="edge10" class="edge">
<title>action&#45;selection&#45;&gt;withdrawal&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M268.9096,-167.7786C279.8849,-158.3091 294.1443,-146.6594 307.7435,-137.499 315.1381,-132.5181 323.2857,-127.6326 331.2582,-123.1461"/>
<polygon fill="#0000ff" stroke="#0000ff" points="333.0581,-126.1506 340.1355,-118.2664 329.6862,-120.0163 333.0581,-126.1506"/>
<text text-anchor="middle" x="330.2655" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> withdraw </text>
</g>
<!-- pin&#45;error&#45;&gt;action&#45;selection -->
<g id="edge5" class="edge">
<title>pin&#45;error&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M399.1019,-255.4503C370.5185,-241.9662 325.523,-220.7398 292.3859,-205.1075"/>
<polygon fill="#0000ff" stroke="#0000ff" points="293.4841,-201.7557 282.9466,-200.6546 290.4975,-208.0866 293.4841,-201.7557"/>
<text text-anchor="middle" x="368.9281" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error&#45;&gt;pin&#45;error -->
<g id="edge6" class="edge">
<title>pin&#45;error&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M463.3475,-275.9966C475.317,-275.9579 484.848,-273.458 484.848,-268.4971 484.848,-265.0864 480.3431,-262.839 473.6381,-261.7549"/>
<polygon fill="#dc143c" stroke="#dc143c" points="473.5774,-258.241 463.3475,-260.9975 473.0636,-265.2222 473.5774,-258.241"/>
<text text-anchor="middle" x="499.8529" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- pin&#45;error&#45;&gt;return&#45;card -->
<g id="edge17" class="edge">
<title>pin&#45;error&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M438.7166,-251.1517C460.5558,-217.1336 501.9831,-140.0543 471.7582,-83.499 460.2151,-61.9002 438.0485,-46.1817 417.7131,-35.5656"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="419.0602,-32.3275 408.5434,-31.0442 415.9645,-38.6058 419.0602,-32.3275"/>
<text text-anchor="middle" x="501.933" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- return&#45;card&#45;&gt;ready -->
<g id="edge7" class="edge">
<title>return&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M419.3472,-24.6929C487.6865,-36.0267 608.7582,-61.7195 608.7582,-101.499 608.7582,-351.9961 608.7582,-351.9961 608.7582,-351.9961 608.7582,-374.9018 602.6685,-381.2969 588.7582,-399.4951 584.1008,-405.5881 578.1808,-411.2229 572.1506,-416.1384"/>
<polygon fill="#0000ff" stroke="#0000ff" points="569.8021,-413.5275 563.9675,-422.3711 574.0436,-419.0962 569.8021,-413.5275"/>
<text text-anchor="middle" x="641.5511" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;returned </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge9" class="edge">
<title>deposit&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M186.9897,-119.8357C186.9467,-129.1912 188.2914,-140.3827 193.5863,-148.998 197.0092,-154.5674 201.6529,-159.4309 206.8129,-163.6289"/>
<polygon fill="#0000ff" stroke="#0000ff" points="205.0808,-166.694 215.245,-169.684 209.1638,-161.0081 205.0808,-166.694"/>
<text text-anchor="middle" x="239.3441" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge14" class="edge">
<title>deposit&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M224.428,-85.3996C255.6776,-71.2952 301.0555,-50.8141 333.5772,-36.1355"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="335.1316,-39.274 342.8064,-31.97 332.2519,-32.8938 335.1316,-39.274"/>
<text text-anchor="middle" x="311.933" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge11" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M369.4704,-119.8441C366.3239,-129.6657 361.1063,-141.2927 352.7582,-148.998 341.8443,-159.0716 327.9539,-166.3516 313.934,-171.6042"/>
<polygon fill="#0000ff" stroke="#0000ff" points="312.567,-168.3728 304.2422,-174.9262 314.8368,-174.9946 312.567,-168.3728"/>
<text text-anchor="middle" x="407.3441" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge15" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M373.7582,-83.381C373.7582,-72.5485 373.7582,-58.5513 373.7582,-46.2889"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="377.2583,-46.0827 373.7582,-36.0827 370.2583,-46.0827 377.2583,-46.0827"/>
<text text-anchor="middle" x="392.933" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- none -->
<g id="node8" class="node">
<title>none</title>
<ellipse fill="none" stroke="#696969" cx="542.7582" cy="-518.9941" rx="27.8051" ry="18"/>
<text text-anchor="middle" x="542.7582" y="-515.0941" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">none</text>
</g>
<!-- none&#45;&gt;ready -->
<g id="edge1" class="edge">
<title>none&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M542.7582,-500.8761C542.7582,-490.0437 542.7582,-476.0464 542.7582,-463.7841"/>
<polygon fill="#0000ff" stroke="#0000ff" points="546.2583,-463.5778 542.7582,-453.5778 539.2583,-463.5778 546.2583,-463.5778"/>
<text text-anchor="middle" x="551.9281" y="-474.9941" font-family="Arial" font-size="10.00" fill="#696969"> init </text>
</g>
</g>
</svg>
