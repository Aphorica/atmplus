<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="770pt" height="628pt"
 viewBox="0.00 0.00 770.23 628.49" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 624.4932)">
<title>fsm</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-624.4932 766.2305,-624.4932 766.2305,4 -4,4"/>
<!-- ready -->
<g id="node1" class="node">
<title>ready</title>
<ellipse fill="none" stroke="#696969" cx="606.7578" cy="-518.9941" rx="29.736" ry="18"/>
<text text-anchor="middle" x="606.7578" y="-515.0941" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">ready</text>
</g>
<!-- pin -->
<g id="node2" class="node">
<title>pin</title>
<ellipse fill="none" stroke="#696969" cx="488.7578" cy="-435.4951" rx="27" ry="18"/>
<text text-anchor="middle" x="488.7578" y="-431.5951" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin</text>
</g>
<!-- ready&#45;&gt;pin -->
<g id="edge2" class="edge">
<title>ready&#45;&gt;pin</title>
<path fill="none" stroke="#0000ff" d="M580.6356,-510.2309C564.7111,-504.1175 544.4845,-494.9188 528.8418,-482.9941 520.4349,-476.5854 512.5921,-468.1254 506.1128,-460.1228"/>
<polygon fill="#0000ff" stroke="#0000ff" points="508.7674,-457.8337 499.8879,-452.054 503.225,-462.1095 508.7674,-457.8337"/>
<text text-anchor="middle" x="561.7158" y="-474.9941" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;inserted </text>
</g>
<!-- action&#45;selection -->
<g id="node3" class="node">
<title>action&#45;selection</title>
<ellipse fill="none" stroke="#696969" cx="248.7578" cy="-268.4971" rx="65.4073" ry="18"/>
<text text-anchor="middle" x="248.7578" y="-264.5971" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">action&#45;selection</text>
</g>
<!-- pin&#45;&gt;action&#45;selection -->
<g id="edge3" class="edge">
<title>pin&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M463.6892,-428.4302C432.1528,-418.7322 377.3046,-399.1167 337.418,-369.9961 308.7241,-349.0471 282.8772,-317.2406 266.5949,-294.8268"/>
<polygon fill="#0000ff" stroke="#0000ff" points="269.2809,-292.5645 260.6322,-286.4449 263.5769,-296.6223 269.2809,-292.5645"/>
<text text-anchor="middle" x="356.9277" y="-349.7456" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error -->
<g id="node4" class="node">
<title>pin&#45;error</title>
<ellipse fill="none" stroke="#696969" cx="424.7578" cy="-351.9961" rx="40.1798" ry="18"/>
<text text-anchor="middle" x="424.7578" y="-348.0961" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin&#45;error</text>
</g>
<!-- pin&#45;&gt;pin&#45;error -->
<g id="edge4" class="edge">
<title>pin&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M476.418,-419.3957C467.2735,-407.4652 454.6319,-390.972 444.1431,-377.2876"/>
<polygon fill="#dc143c" stroke="#dc143c" points="446.8023,-375.0035 437.9411,-369.1959 441.2466,-379.2619 446.8023,-375.0035"/>
<text text-anchor="middle" x="475.7627" y="-391.4951" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- return&#45;card -->
<g id="node5" class="node">
<title>return&#45;card</title>
<ellipse fill="none" stroke="#696969" cx="432.7578" cy="-101.499" rx="48.9745" ry="18"/>
<text text-anchor="middle" x="432.7578" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">return&#45;card</text>
</g>
<!-- pin&#45;&gt;return&#45;card -->
<g id="edge18" class="edge">
<title>pin&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M504.9259,-420.8923C520.1906,-405.4283 540.7578,-379.4911 540.7578,-351.9961 540.7578,-351.9961 540.7578,-351.9961 540.7578,-184.998 540.7578,-151.9569 508.7287,-130.1398 479.5552,-117.1209"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="480.8028,-113.8487 470.2279,-113.2 478.0902,-120.3017 480.8028,-113.8487"/>
<text text-anchor="middle" x="559.9326" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge12" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#a0522d" d="M188.224,-261.5119C136.4657,-254.9044 66.4047,-244.2677 40.7578,-232.4971 10.6059,-218.6589 -9.2003,-197.0024 4.9551,-166.998 13.7522,-148.3513 21.6912,-145.3448 40.7578,-137.499 99.3902,-113.3724 278.9528,-105.3077 373.349,-102.6961"/>
<polygon fill="#a0522d" stroke="#a0522d" points="373.6913,-106.1884 383.5951,-102.4248 373.5059,-99.1908 373.6913,-106.1884"/>
<text text-anchor="middle" x="19.6592" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> done </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge15" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M192.7369,-259.1623C124.57,-245.4417 23.3456,-216.0064 64.4082,-166.998 103.1583,-120.7497 279.6654,-107.1317 373.5736,-103.1407"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="373.9233,-106.6295 383.7748,-102.7312 373.6425,-99.6352 373.9233,-106.6295"/>
<text text-anchor="middle" x="83.9326" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- deposit&#45;transaction -->
<g id="node6" class="node">
<title>deposit&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="188.7578" cy="-184.998" rx="77.4308" ry="18"/>
<text text-anchor="middle" x="188.7578" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">deposit&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;deposit&#45;transaction -->
<g id="edge8" class="edge">
<title>action&#45;selection&#45;&gt;deposit&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M194.4913,-258.2463C167.8642,-252.0001 139.8317,-243.1669 131.9551,-232.4971 124.7152,-222.6896 130.633,-213.6305 140.9541,-206.111"/>
<polygon fill="#0000ff" stroke="#0000ff" points="142.9752,-208.9742 149.56,-200.6741 139.2364,-203.0563 142.9752,-208.9742"/>
<text text-anchor="middle" x="151.6592" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> deposit </text>
</g>
<!-- withdrawal&#45;transaction -->
<g id="node7" class="node">
<title>withdrawal&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="373.7578" cy="-184.998" rx="89.4308" ry="18"/>
<text text-anchor="middle" x="373.7578" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">withdrawal&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;withdrawal&#45;transaction -->
<g id="edge10" class="edge">
<title>action&#45;selection&#45;&gt;withdrawal&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M267.887,-251.2445C278.8554,-241.7646 293.1152,-230.1156 306.7432,-220.998 314.24,-215.9824 322.5065,-211.0807 330.5984,-206.5891"/>
<polygon fill="#0000ff" stroke="#0000ff" points="332.4838,-209.5484 339.6098,-201.708 329.1499,-203.3933 332.4838,-209.5484"/>
<text text-anchor="middle" x="329.2651" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> withdraw </text>
</g>
<!-- pin&#45;error&#45;&gt;action&#45;selection -->
<g id="edge5" class="edge">
<title>pin&#45;error&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M396.8701,-338.7654C368.3751,-325.2467 323.7725,-304.086 290.954,-288.516"/>
<polygon fill="#0000ff" stroke="#0000ff" points="292.1415,-285.2056 281.6065,-284.0813 289.141,-291.5299 292.1415,-285.2056"/>
<text text-anchor="middle" x="366.9277" y="-307.9961" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error&#45;&gt;pin&#45;error -->
<g id="edge6" class="edge">
<title>pin&#45;error&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M461.3471,-359.4956C473.3167,-359.4569 482.8476,-356.957 482.8476,-351.9961 482.8476,-348.5854 478.3428,-346.3381 471.6377,-345.2539"/>
<polygon fill="#dc143c" stroke="#dc143c" points="471.5771,-341.7401 461.3471,-344.4966 471.0632,-348.7212 471.5771,-341.7401"/>
<text text-anchor="middle" x="497.8525" y="-349.7456" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- pin&#45;error&#45;&gt;return&#45;card -->
<g id="edge19" class="edge">
<title>pin&#45;error&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M435.2666,-334.5923C453.7605,-301.7319 488.6382,-228.3429 471.7578,-166.998 467.8686,-152.8641 460.0437,-138.699 452.417,-127.1756"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="455.2677,-125.1444 446.692,-118.9229 449.5162,-129.1344 455.2677,-125.1444"/>
<text text-anchor="middle" x="494.9326" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- return&#45;card&#45;&gt;ready -->
<g id="edge7" class="edge">
<title>return&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M472.6769,-112.1004C524.0477,-126.9417 606.7578,-155.4285 606.7578,-184.998 606.7578,-435.4951 606.7578,-435.4951 606.7578,-435.4951 606.7578,-453.7515 606.7578,-474.2531 606.7578,-490.3727"/>
<polygon fill="#0000ff" stroke="#0000ff" points="603.2579,-490.7509 606.7578,-500.7509 610.2579,-490.7509 603.2579,-490.7509"/>
<text text-anchor="middle" x="639.5508" y="-307.9961" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;returned </text>
</g>
<!-- swallow&#45;card -->
<g id="node8" class="node">
<title>swallow&#45;card</title>
<ellipse fill="none" stroke="#696969" cx="589.7578" cy="-18" rx="56.1981" ry="18"/>
<text text-anchor="middle" x="589.7578" y="-14.1" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">swallow&#45;card</text>
</g>
<!-- return&#45;card&#45;&gt;swallow&#45;card -->
<g id="edge13" class="edge">
<title>return&#45;card&#45;&gt;swallow&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M460.8263,-86.5711C486.1047,-73.127 523.4826,-53.2479 551.4933,-38.3507"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="553.4169,-41.2918 560.6024,-33.506 550.1299,-35.1115 553.4169,-41.2918"/>
<text text-anchor="middle" x="551.3242" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;timeout </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge9" class="edge">
<title>deposit&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M186.5365,-203.3032C186.2783,-212.6501 187.3912,-223.8434 192.5859,-232.4971 195.9114,-238.0367 200.4546,-242.8715 205.5269,-247.0455"/>
<polygon fill="#0000ff" stroke="#0000ff" points="203.6836,-250.0321 213.8344,-253.0671 207.7918,-244.3644 203.6836,-250.0321"/>
<text text-anchor="middle" x="238.3438" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge16" class="edge">
<title>deposit&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M232.3801,-170.0701C275.964,-155.1553 342.6909,-132.3208 387.0092,-117.1546"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="388.3323,-120.4012 396.6604,-113.8519 386.0659,-113.7782 388.3323,-120.4012"/>
<text text-anchor="middle" x="344.9326" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;action&#45;selection -->
<g id="edge11" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M369.0618,-203.3529C365.7017,-213.1776 360.2397,-224.8044 351.7578,-232.4971 340.7563,-242.4749 326.832,-249.7178 312.8072,-254.965"/>
<polygon fill="#0000ff" stroke="#0000ff" points="311.4404,-251.7336 303.1163,-258.288 313.7109,-258.3551 311.4404,-251.7336"/>
<text text-anchor="middle" x="406.3438" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;popped </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge17" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M386.5599,-166.88C394.7108,-155.3446 405.3976,-140.2203 414.4394,-127.4239"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="417.4727,-129.1962 420.385,-119.0095 411.7558,-125.1567 417.4727,-129.1962"/>
<text text-anchor="middle" x="426.9326" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> timeout </text>
</g>
<!-- swallow&#45;card&#45;&gt;ready -->
<g id="edge14" class="edge">
<title>swallow&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M626.2494,-31.847C654.1122,-45.0664 687.7578,-67.9709 687.7578,-101.499 687.7578,-435.4951 687.7578,-435.4951 687.7578,-435.4951 687.7578,-464.9141 661.5332,-487.8881 638.9275,-502.2267"/>
<polygon fill="#0000ff" stroke="#0000ff" points="636.958,-499.3267 630.1864,-507.4751 640.5614,-505.328 636.958,-499.3267"/>
<text text-anchor="middle" x="724.9941" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;swallowed </text>
</g>
<!-- none -->
<g id="node9" class="node">
<title>none</title>
<ellipse fill="none" stroke="#696969" cx="606.7578" cy="-602.4932" rx="27.8051" ry="18"/>
<text text-anchor="middle" x="606.7578" y="-598.5932" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">none</text>
</g>
<!-- none&#45;&gt;ready -->
<g id="edge1" class="edge">
<title>none&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M606.7578,-584.3751C606.7578,-573.5427 606.7578,-559.5455 606.7578,-547.2831"/>
<polygon fill="#0000ff" stroke="#0000ff" points="610.2579,-547.0768 606.7578,-537.0768 603.2579,-547.0769 610.2579,-547.0768"/>
<text text-anchor="middle" x="615.9277" y="-558.4932" font-family="Arial" font-size="10.00" fill="#696969"> init </text>
</g>
</g>
</svg>
