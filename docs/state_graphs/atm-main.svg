<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="720pt" height="560pt"
 viewBox="0.00 0.00 719.93 560.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 556)">
<title>fsm</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-556 715.9321,-556 715.9321,4 -4,4"/>
<!-- ready -->
<g id="node1" class="node">
<title>ready</title>
<ellipse fill="none" stroke="#000000" cx="29.7455" cy="-534" rx="29.9931" ry="18"/>
<text text-anchor="middle" x="29.7455" y="-529.8" font-family="Times,serif" font-size="14.00" fill="#000000">ready</text>
</g>
<!-- pin -->
<g id="node2" class="node">
<title>pin</title>
<ellipse fill="none" stroke="#000000" cx="123.7455" cy="-448" rx="27" ry="18"/>
<text text-anchor="middle" x="123.7455" y="-443.8" font-family="Times,serif" font-size="14.00" fill="#000000">pin</text>
</g>
<!-- ready&#45;&gt;pin -->
<g id="edge1" class="edge">
<title>ready&#45;&gt;pin</title>
<path fill="none" stroke="#000000" d="M46.5508,-518.6249C61.4361,-505.0065 83.3286,-484.9772 100.0013,-469.7235"/>
<polygon fill="#000000" stroke="#000000" points="102.6976,-472.0004 107.7132,-462.6679 97.9725,-466.8358 102.6976,-472.0004"/>
<text text-anchor="middle" x="116.1733" y="-486.8" font-family="Times,serif" font-size="14.00" fill="#000000"> insert&#45;card </text>
</g>
<!-- action&#45;selection -->
<g id="node3" class="node">
<title>action&#45;selection</title>
<ellipse fill="none" stroke="#000000" cx="311.7455" cy="-276" rx="66.1821" ry="18"/>
<text text-anchor="middle" x="311.7455" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#000000">action&#45;selection</text>
</g>
<!-- pin&#45;&gt;action&#45;selection -->
<g id="edge2" class="edge">
<title>pin&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#000000" d="M150.2476,-444.1796C186.1097,-437.588 249.6331,-420.6377 284.7455,-380 302.9598,-358.9195 309.1114,-327.0396 311.0756,-304.1354"/>
<polygon fill="#000000" stroke="#000000" points="314.5778,-304.2107 311.725,-294.0072 307.5922,-303.7627 314.5778,-304.2107"/>
<text text-anchor="middle" x="329.0214" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#000000"> confirm </text>
</g>
<!-- pin&#45;error -->
<g id="node4" class="node">
<title>pin&#45;error</title>
<ellipse fill="none" stroke="#000000" cx="123.7455" cy="-362" rx="41.5679" ry="18"/>
<text text-anchor="middle" x="123.7455" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#000000">pin&#45;error</text>
</g>
<!-- pin&#45;&gt;pin&#45;error -->
<g id="edge3" class="edge">
<title>pin&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#000000" d="M123.7455,-429.7616C123.7455,-418.3597 123.7455,-403.4342 123.7455,-390.494"/>
<polygon fill="#000000" stroke="#000000" points="127.2456,-390.2121 123.7455,-380.2121 120.2456,-390.2121 127.2456,-390.2121"/>
<text text-anchor="middle" x="142.787" y="-400.8" font-family="Times,serif" font-size="14.00" fill="#000000"> reject </text>
</g>
<!-- deposit&#45;transaction -->
<g id="node6" class="node">
<title>deposit&#45;transaction</title>
<ellipse fill="none" stroke="#000000" cx="311.7455" cy="-190" rx="77.2916" ry="18"/>
<text text-anchor="middle" x="311.7455" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">deposit&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;deposit&#45;transaction -->
<g id="edge7" class="edge">
<title>action&#45;selection&#45;&gt;deposit&#45;transaction</title>
<path fill="none" stroke="#000000" d="M311.7455,-257.7616C311.7455,-246.3597 311.7455,-231.4342 311.7455,-218.494"/>
<polygon fill="#000000" stroke="#000000" points="315.2456,-218.2121 311.7455,-208.2121 308.2456,-218.2121 315.2456,-218.2121"/>
<text text-anchor="middle" x="335.4662" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000"> deposit </text>
</g>
<!-- withdrawal&#45;transaction -->
<g id="node8" class="node">
<title>withdrawal&#45;transaction</title>
<ellipse fill="none" stroke="#000000" cx="498.7455" cy="-190" rx="91.7652" ry="18"/>
<text text-anchor="middle" x="498.7455" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000">withdrawal&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;withdrawal&#45;transaction -->
<g id="edge9" class="edge">
<title>action&#45;selection&#45;&gt;withdrawal&#45;transaction</title>
<path fill="none" stroke="#000000" d="M345.6098,-260.426C375.6893,-246.5927 419.9011,-226.26 453.0967,-210.9936"/>
<polygon fill="#000000" stroke="#000000" points="454.9581,-213.99 462.581,-206.6318 452.0333,-207.6303 454.9581,-213.99"/>
<text text-anchor="middle" x="446.6835" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000"> withdraw </text>
</g>
<!-- confirm&#45;cancel -->
<g id="node9" class="node">
<title>confirm&#45;cancel</title>
<ellipse fill="none" stroke="#000000" cx="197.7455" cy="-104" rx="63.2837" ry="18"/>
<text text-anchor="middle" x="197.7455" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#000000">confirm&#45;cancel</text>
</g>
<!-- action&#45;selection&#45;&gt;confirm&#45;cancel -->
<g id="edge13" class="edge">
<title>action&#45;selection&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#000000" d="M262.8378,-263.8201C234.1715,-253.8931 200.2902,-236.6853 183.0004,-208 169.0407,-184.8396 176.2009,-153.615 184.6975,-131.4398"/>
<polygon fill="#000000" stroke="#000000" points="188.035,-132.5279 188.6242,-121.9495 181.5668,-129.8516 188.035,-132.5279"/>
<text text-anchor="middle" x="205.1181" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000"> cancel </text>
</g>
<!-- pin&#45;error&#45;&gt;action&#45;selection -->
<g id="edge4" class="edge">
<title>pin&#45;error&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#000000" d="M150.0335,-348.0445C169.9019,-337.6753 197.9576,-323.4112 223.1039,-312 236.2488,-306.0349 250.6844,-299.9711 264.0195,-294.5629"/>
<polygon fill="#000000" stroke="#000000" points="265.5279,-297.7289 273.5009,-290.7516 262.917,-291.234 265.5279,-297.7289"/>
<text text-anchor="middle" x="261.0663" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#000000"> retry&#45;pin&#45;ok </text>
</g>
<!-- pin&#45;error&#45;&gt;pin&#45;error -->
<g id="edge5" class="edge">
<title>pin&#45;error&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#000000" d="M161.2445,-369.8745C173.5116,-369.8338 183.2795,-367.209 183.2795,-362 183.2795,-358.3374 178.4504,-355.9524 171.3189,-354.845"/>
<polygon fill="#000000" stroke="#000000" points="171.4684,-351.3468 161.2445,-354.1255 170.9697,-358.3291 171.4684,-351.3468"/>
<text text-anchor="middle" x="229.5348" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#000000"> retry&#45;pin&#45;failed </text>
</g>
<!-- pin&#45;error&#45;&gt;confirm&#45;cancel -->
<g id="edge16" class="edge">
<title>pin&#45;error&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#000000" d="M125.5077,-343.9922C129.8035,-305.2129 142.8922,-211.5284 174.7455,-140 176.1768,-136.786 177.8674,-133.527 179.672,-130.35"/>
<polygon fill="#000000" stroke="#000000" points="182.7175,-132.0784 184.9395,-121.7192 176.7424,-128.4318 182.7175,-132.0784"/>
<text text-anchor="middle" x="168.1181" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#000000"> cancel </text>
</g>
<!-- return&#45;card -->
<g id="node5" class="node">
<title>return&#45;card</title>
<ellipse fill="none" stroke="#000000" cx="197.7455" cy="-18" rx="49.2688" ry="18"/>
<text text-anchor="middle" x="197.7455" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">return&#45;card</text>
</g>
<!-- return&#45;card&#45;&gt;ready -->
<g id="edge6" class="edge">
<title>return&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#000000" d="M156.91,-28.346C102.7021,-43.2987 13.7455,-72.6173 13.7455,-104 13.7455,-448 13.7455,-448 13.7455,-448 13.7455,-467.7452 17.8725,-489.6167 21.9345,-506.3617"/>
<polygon fill="#000000" stroke="#000000" points="18.5467,-507.2413 24.4178,-516.0606 25.3279,-505.5049 18.5467,-507.2413"/>
<text text-anchor="middle" x="54.9423" y="-271.8" font-family="Times,serif" font-size="14.00" fill="#000000"> card&#45;returned </text>
</g>
<!-- continue -->
<g id="node7" class="node">
<title>continue</title>
<ellipse fill="none" stroke="#000000" cx="429.7455" cy="-104" rx="40.6162" ry="18"/>
<text text-anchor="middle" x="429.7455" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#000000">continue</text>
</g>
<!-- deposit&#45;transaction&#45;&gt;continue -->
<g id="edge8" class="edge">
<title>deposit&#45;transaction&#45;&gt;continue</title>
<path fill="none" stroke="#000000" d="M328.2782,-172.1411C338.1713,-162.0214 351.3178,-149.5214 364.3315,-140 373.2108,-133.5034 383.3928,-127.3575 393.0376,-122.0438"/>
<polygon fill="#000000" stroke="#000000" points="394.8915,-125.0215 402.06,-117.22 391.591,-118.8484 394.8915,-125.0215"/>
<text text-anchor="middle" x="416.4526" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000"> deposit&#45;complete </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;confirm&#45;cancel -->
<g id="edge14" class="edge">
<title>deposit&#45;transaction&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#000000" d="M266.8123,-175.2845C254.372,-169.8548 241.4338,-162.8172 231.0004,-154 223.3986,-147.5758 216.8418,-138.9894 211.6077,-130.747"/>
<polygon fill="#000000" stroke="#000000" points="214.568,-128.877 206.4605,-122.0566 208.5452,-132.4443 214.568,-128.877"/>
<text text-anchor="middle" x="253.1181" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000"> cancel </text>
</g>
<!-- continue&#45;&gt;action&#45;selection -->
<g id="edge11" class="edge">
<title>continue&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#000000" d="M469.9739,-106.7499C515.244,-110.7804 584.593,-120.0929 600.7455,-140 619.7899,-163.4711 618.3562,-184.1836 599.7455,-208 573.5966,-241.4632 461.1061,-260.0655 384.7003,-269.0449"/>
<polygon fill="#000000" stroke="#000000" points="384.1753,-265.5821 374.6382,-270.1967 384.9714,-272.5367 384.1753,-265.5821"/>
<text text-anchor="middle" x="663.3388" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#000000"> next&#45;transaction </text>
</g>
<!-- continue&#45;&gt;return&#45;card -->
<g id="edge12" class="edge">
<title>continue&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#000000" d="M400.3797,-91.5649C375.3781,-81.1213 338.4225,-66.0213 305.7455,-54 286.0011,-46.7364 264.004,-39.2891 245.0411,-33.0667"/>
<polygon fill="#000000" stroke="#000000" points="246.0218,-29.7052 235.4294,-29.932 243.8513,-36.3602 246.0218,-29.7052"/>
<text text-anchor="middle" x="359.8075" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000"> finish </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;continue -->
<g id="edge10" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;continue</title>
<path fill="none" stroke="#000000" d="M490.9658,-171.8997C486.2112,-161.9396 479.5486,-149.676 471.7455,-140 467.8834,-135.2109 463.3241,-130.5643 458.6584,-126.2887"/>
<polygon fill="#000000" stroke="#000000" points="460.6586,-123.3905 450.8102,-119.484 456.0729,-128.6794 460.6586,-123.3905"/>
<text text-anchor="middle" x="538.6698" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000"> withdraw&#45;complete </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;confirm&#45;cancel -->
<g id="edge15" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#000000" d="M430.8257,-177.8743C374.8642,-167.8465 304.1756,-155.078 301.0004,-154 288.1054,-149.622 285.9573,-146.0267 273.7455,-140 262.8012,-134.5988 250.9007,-128.8864 239.8354,-123.642"/>
<polygon fill="#000000" stroke="#000000" points="241.3134,-120.4693 230.7764,-119.3638 238.3242,-126.799 241.3134,-120.4693"/>
<text text-anchor="middle" x="323.1181" y="-142.8" font-family="Times,serif" font-size="14.00" fill="#000000"> cancel </text>
</g>
<!-- confirm&#45;cancel&#45;&gt;return&#45;card -->
<g id="edge17" class="edge">
<title>confirm&#45;cancel&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#000000" d="M197.7455,-85.7616C197.7455,-74.3597 197.7455,-59.4342 197.7455,-46.494"/>
<polygon fill="#000000" stroke="#000000" points="201.2456,-46.2121 197.7455,-36.2121 194.2456,-46.2121 201.2456,-46.2121"/>
<text text-anchor="middle" x="249.832" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000"> cancel&#45;confirmed </text>
</g>
</g>
</svg>
