<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: fsm Pages: 1 -->
<svg width="846pt" height="545pt"
 viewBox="0.00 0.00 845.59 544.99" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 540.9941)">
<title>fsm</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-540.9941 841.5859,-540.9941 841.5859,4 -4,4"/>
<!-- ready -->
<g id="node1" class="node">
<title>ready</title>
<ellipse fill="none" stroke="#696969" cx="624" cy="-518.9941" rx="29.736" ry="18"/>
<text text-anchor="middle" x="624" y="-515.0941" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">ready</text>
</g>
<!-- pin -->
<g id="node2" class="node">
<title>pin</title>
<ellipse fill="none" stroke="#696969" cx="540" cy="-435.4951" rx="27" ry="18"/>
<text text-anchor="middle" x="540" y="-431.5951" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin</text>
</g>
<!-- ready&#45;&gt;pin -->
<g id="edge1" class="edge">
<title>ready&#45;&gt;pin</title>
<path fill="none" stroke="#0000ff" d="M608.2002,-503.2886C595.2497,-490.4153 576.7657,-472.0415 562.3067,-457.6688"/>
<polygon fill="#0000ff" stroke="#0000ff" points="564.7228,-455.1354 555.1631,-450.5678 559.7879,-460.1 564.7228,-455.1354"/>
<text text-anchor="middle" x="619.958" y="-474.9941" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;inserted </text>
</g>
<!-- action&#45;selection -->
<g id="node3" class="node">
<title>action&#45;selection</title>
<ellipse fill="none" stroke="#696969" cx="476" cy="-268.4971" rx="65.4073" ry="18"/>
<text text-anchor="middle" x="476" y="-264.5971" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">action&#45;selection</text>
</g>
<!-- pin&#45;&gt;action&#45;selection -->
<g id="edge2" class="edge">
<title>pin&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M533.2718,-417.939C522.1429,-388.8997 499.8175,-330.645 486.567,-296.0699"/>
<polygon fill="#0000ff" stroke="#0000ff" points="489.7747,-294.6593 482.9278,-286.574 483.2382,-297.1643 489.7747,-294.6593"/>
<text text-anchor="middle" x="534.1699" y="-349.7456" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error -->
<g id="node4" class="node">
<title>pin&#45;error</title>
<ellipse fill="none" stroke="#696969" cx="622" cy="-351.9961" rx="40.1798" ry="18"/>
<text text-anchor="middle" x="622" y="-348.0961" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">pin&#45;error</text>
</g>
<!-- pin&#45;&gt;pin&#45;error -->
<g id="edge3" class="edge">
<title>pin&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M555.0401,-420.1801C567.1336,-407.8655 584.3462,-390.3382 598.2913,-376.1382"/>
<polygon fill="#dc143c" stroke="#dc143c" points="601.1397,-378.233 605.6492,-368.6458 596.1453,-373.3282 601.1397,-378.233"/>
<text text-anchor="middle" x="601.0049" y="-391.4951" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- return&#45;card -->
<g id="node5" class="node">
<title>return&#45;card</title>
<ellipse fill="none" stroke="#696969" cx="449" cy="-18" rx="48.9745" ry="18"/>
<text text-anchor="middle" x="449" y="-14.1" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">return&#45;card</text>
</g>
<!-- pin&#45;&gt;return&#45;card -->
<g id="edge21" class="edge">
<title>pin&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M512.8512,-434.1977C403.3484,-428.6102 0,-404.4678 0,-351.9961 0,-351.9961 0,-351.9961 0,-101.499 0,-62.2074 269.1987,-33.7014 390.7111,-22.8356"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="391.2962,-26.2976 400.9491,-21.9306 390.6798,-19.3248 391.2962,-26.2976"/>
<text text-anchor="middle" x="23.6206" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- action&#45;selection&#45;&gt;return&#45;card -->
<g id="edge18" class="edge">
<title>action&#45;selection&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M413.6625,-262.6724C307.6637,-252.1203 101.7013,-228.5537 81,-202.998 -9.1854,-91.6647 267.2375,-41.2802 391.6386,-24.6394"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="392.2969,-28.0832 401.7583,-23.3154 391.3887,-21.1424 392.2969,-28.0832"/>
<text text-anchor="middle" x="92.6206" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- deposit&#45;transaction -->
<g id="node6" class="node">
<title>deposit&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="476" cy="-184.998" rx="77.4308" ry="18"/>
<text text-anchor="middle" x="476" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">deposit&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;deposit&#45;transaction -->
<g id="edge7" class="edge">
<title>action&#45;selection&#45;&gt;deposit&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M476,-250.379C476,-239.5466 476,-225.5494 476,-213.287"/>
<polygon fill="#0000ff" stroke="#0000ff" points="479.5001,-213.0807 476,-203.0807 472.5001,-213.0808 479.5001,-213.0807"/>
<text text-anchor="middle" x="494.9014" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> deposit </text>
</g>
<!-- withdrawal&#45;transaction -->
<g id="node8" class="node">
<title>withdrawal&#45;transaction</title>
<ellipse fill="#ffff00" stroke="#696969" cx="179" cy="-184.998" rx="89.4308" ry="18"/>
<text text-anchor="middle" x="179" y="-181.098" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">withdrawal&#45;transaction</text>
</g>
<!-- action&#45;selection&#45;&gt;withdrawal&#45;transaction -->
<g id="edge9" class="edge">
<title>action&#45;selection&#45;&gt;withdrawal&#45;transaction</title>
<path fill="none" stroke="#0000ff" d="M414.493,-262.1829C356.7259,-255.6647 274.841,-244.7434 244.9854,-232.4971 231.2487,-226.8625 217.6602,-217.8391 206.4173,-209.1629"/>
<polygon fill="#0000ff" stroke="#0000ff" points="208.3028,-206.1883 198.3134,-202.6578 203.9208,-211.6471 208.3028,-206.1883"/>
<text text-anchor="middle" x="267.5073" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> withdraw </text>
</g>
<!-- confirm&#45;cancel -->
<g id="node9" class="node">
<title>confirm&#45;cancel</title>
<ellipse fill="none" stroke="#696969" cx="604" cy="-101.499" rx="61.7645" ry="18"/>
<text text-anchor="middle" x="604" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">confirm&#45;cancel</text>
</g>
<!-- action&#45;selection&#45;&gt;confirm&#45;cancel -->
<g id="edge13" class="edge">
<title>action&#45;selection&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#a0522d" d="M504.7099,-252.1454C523.1307,-240.444 546.429,-223.2225 562,-202.998 578.9964,-180.9223 590.2721,-150.9872 596.8213,-129.3527"/>
<polygon fill="#a0522d" stroke="#a0522d" points="600.2632,-130.0474 599.6609,-119.4697 593.5354,-128.1142 600.2632,-130.0474"/>
<text text-anchor="middle" x="600.2314" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> cancel </text>
</g>
<!-- pin&#45;error&#45;&gt;action&#45;selection -->
<g id="edge4" class="edge">
<title>pin&#45;error&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M597.2331,-337.8316C574.2359,-324.6793 539.6792,-304.9159 513.3366,-289.8503"/>
<polygon fill="#0000ff" stroke="#0000ff" points="514.8121,-286.6622 504.3938,-284.7358 511.3368,-292.7386 514.8121,-286.6622"/>
<text text-anchor="middle" x="577.1699" y="-307.9961" font-family="Arial" font-size="10.00" fill="#696969"> confirm </text>
</g>
<!-- pin&#45;error&#45;&gt;pin&#45;error -->
<g id="edge5" class="edge">
<title>pin&#45;error&#45;&gt;pin&#45;error</title>
<path fill="none" stroke="#dc143c" d="M658.5893,-359.4956C670.5589,-359.4569 680.0898,-356.957 680.0898,-351.9961 680.0898,-348.5854 675.5849,-346.3381 668.8799,-345.2539"/>
<polygon fill="#dc143c" stroke="#dc143c" points="668.8193,-341.7401 658.5893,-344.4966 668.3054,-348.7212 668.8193,-341.7401"/>
<text text-anchor="middle" x="695.0947" y="-349.7456" font-family="Arial" font-size="10.00" fill="#696969"> reject </text>
</g>
<!-- pin&#45;error&#45;&gt;return&#45;card -->
<g id="edge22" class="edge">
<title>pin&#45;error&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M647.3916,-337.642C669.1497,-323.2514 697,-298.8945 697,-268.4971 697,-268.4971 697,-268.4971 697,-101.499 697,-61.3094 578.5416,-36.7882 505.3641,-25.4745"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="505.7661,-21.9957 495.356,-23.9655 504.7224,-28.9174 505.7661,-21.9957"/>
<text text-anchor="middle" x="720.6206" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- pin&#45;error&#45;&gt;confirm&#45;cancel -->
<g id="edge16" class="edge">
<title>pin&#45;error&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#a0522d" d="M623.3909,-333.7766C625.6024,-300.4866 628.9119,-227.6695 621,-166.998 619.3716,-154.5112 616.1266,-140.9982 612.9042,-129.5075"/>
<polygon fill="#a0522d" stroke="#a0522d" points="616.1738,-128.2195 609.9981,-119.6106 609.4574,-130.1917 616.1738,-128.2195"/>
<text text-anchor="middle" x="643.2314" y="-224.4971" font-family="Arial" font-size="10.00" fill="#696969"> cancel </text>
</g>
<!-- return&#45;card&#45;&gt;ready -->
<g id="edge6" class="edge">
<title>return&#45;card&#45;&gt;ready</title>
<path fill="none" stroke="#0000ff" d="M497.7061,-20.5035C587.9391,-26.4813 772,-45.534 772,-101.499 772,-435.4951 772,-435.4951 772,-435.4951 772,-485.3397 707.535,-505.7614 663.6962,-513.8863"/>
<polygon fill="#0000ff" stroke="#0000ff" points="662.8621,-510.478 653.5943,-515.6121 664.0409,-517.378 662.8621,-510.478"/>
<text text-anchor="middle" x="804.793" y="-266.2466" font-family="Arial" font-size="10.00" fill="#696969"> card&#45;returned </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge19" class="edge">
<title>deposit&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M487.4245,-166.8681C491.6217,-158.1615 494.9312,-147.4738 493,-137.499 491.361,-129.0331 488.8366,-127.5541 485.7588,-119.499 476.2596,-94.6378 465.988,-66.126 458.724,-45.6639"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="461.9534,-44.298 455.318,-36.0384 455.3544,-46.6331 461.9534,-44.298"/>
<text text-anchor="middle" x="509.6206" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- continue -->
<g id="node7" class="node">
<title>continue</title>
<ellipse fill="none" stroke="#696969" cx="320" cy="-101.499" rx="40.2111" ry="18"/>
<text text-anchor="middle" x="320" y="-97.599" font-family="Helvetica,sans-Serif" font-size="13.00" fill="#696969">continue</text>
</g>
<!-- deposit&#45;transaction&#45;&gt;continue -->
<g id="edge8" class="edge">
<title>deposit&#45;transaction&#45;&gt;continue</title>
<path fill="none" stroke="#0000ff" d="M418.9515,-172.7638C383.6891,-164.7538 343.9741,-154.7413 337.6211,-148.998 331.8795,-143.8075 328.003,-136.5727 325.3879,-129.3125"/>
<polygon fill="#0000ff" stroke="#0000ff" points="328.7103,-128.2037 322.5469,-119.5861 321.9911,-130.1663 328.7103,-128.2037"/>
<text text-anchor="middle" x="387.1895" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;complete </text>
</g>
<!-- deposit&#45;transaction&#45;&gt;confirm&#45;cancel -->
<g id="edge14" class="edge">
<title>deposit&#45;transaction&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#a0522d" d="M498.2357,-167.6212C510.4687,-158.3215 526.0627,-146.884 540.5371,-137.499 548.4205,-132.3876 557.0631,-127.216 565.3633,-122.4482"/>
<polygon fill="#a0522d" stroke="#a0522d" points="567.2053,-125.4274 574.1833,-117.4551 563.7567,-119.3358 567.2053,-125.4274"/>
<text text-anchor="middle" x="558.2314" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> cancel </text>
</g>
<!-- continue&#45;&gt;action&#45;selection -->
<g id="edge11" class="edge">
<title>continue&#45;&gt;action&#45;selection</title>
<path fill="none" stroke="#0000ff" d="M312.6833,-119.361C305.0629,-141.0929 296.3936,-177.9732 313.2959,-202.998 334.0822,-233.7732 371.9912,-250.0913 405.9904,-258.7423"/>
<polygon fill="#0000ff" stroke="#0000ff" points="405.3877,-262.1962 415.9243,-261.0866 406.9955,-255.3833 405.3877,-262.1962"/>
<text text-anchor="middle" x="352.3521" y="-182.7476" font-family="Arial" font-size="10.00" fill="#696969"> next&#45;transaction </text>
</g>
<!-- continue&#45;&gt;return&#45;card -->
<g id="edge12" class="edge">
<title>continue&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#0000ff" d="M343.0626,-86.5711C363.2797,-73.485 392.9157,-54.3022 415.7048,-39.5513"/>
<polygon fill="#0000ff" stroke="#0000ff" points="417.8871,-42.308 424.3801,-33.9359 414.0834,-36.4316 417.8871,-42.308"/>
<text text-anchor="middle" x="407.4507" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> finish </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;return&#45;card -->
<g id="edge20" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#ff8c00" d="M177.1716,-166.8852C176.8937,-157.7997 177.5489,-146.7827 181,-137.499 191.6669,-108.8047 198.3558,-100.5823 223.7588,-83.499 274.711,-49.2341 343.7769,-32.6106 391.9454,-24.7339"/>
<polygon fill="#ff8c00" stroke="#ff8c00" points="392.5516,-28.1818 401.8929,-23.1827 391.473,-21.2654 392.5516,-28.1818"/>
<text text-anchor="middle" x="247.6206" y="-99.2485" font-family="Arial" font-size="10.00" fill="#696969"> timed&#45;out </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;continue -->
<g id="edge10" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;continue</title>
<path fill="none" stroke="#0000ff" d="M179.6177,-166.6132C180.8958,-156.7791 184.0712,-145.1529 191.6211,-137.499 203.0622,-125.9003 240.7368,-116.1723 272.3359,-109.7647"/>
<polygon fill="#0000ff" stroke="#0000ff" points="273.2013,-113.1618 282.3409,-107.8029 271.8543,-106.2926 273.2013,-113.1618"/>
<text text-anchor="middle" x="241.1895" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> transaction&#45;complete </text>
</g>
<!-- withdrawal&#45;transaction&#45;&gt;confirm&#45;cancel -->
<g id="edge15" class="edge">
<title>withdrawal&#45;transaction&#45;&gt;confirm&#45;cancel</title>
<path fill="none" stroke="#a0522d" d="M245.1235,-172.8719C257.3647,-170.7894 270.0544,-168.7385 282,-166.998 350.1904,-157.0627 368.4083,-162.4146 436,-148.998 475.8753,-141.083 520.0829,-128.4233 553.1375,-118.1634"/>
<polygon fill="#a0522d" stroke="#a0522d" points="554.5261,-121.3961 563.0207,-115.0642 552.4315,-114.7168 554.5261,-121.3961"/>
<text text-anchor="middle" x="500.2314" y="-140.998" font-family="Arial" font-size="10.00" fill="#696969"> cancel </text>
</g>
<!-- confirm&#45;cancel&#45;&gt;return&#45;card -->
<g id="edge17" class="edge">
<title>confirm&#45;cancel&#45;&gt;return&#45;card</title>
<path fill="none" stroke="#0000ff" d="M574.4808,-85.597C549.2281,-71.9932 512.7702,-52.3532 485.6534,-37.7453"/>
<polygon fill="#0000ff" stroke="#0000ff" points="487.3089,-34.6616 476.8451,-33.0003 483.989,-40.8243 487.3089,-34.6616"/>
<text text-anchor="middle" x="576.8496" y="-57.499" font-family="Arial" font-size="10.00" fill="#696969"> cancel&#45;confirmed </text>
</g>
</g>
</svg>
